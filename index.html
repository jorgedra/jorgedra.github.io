<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Temporizador Pomodoro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .setup-section {
            margin-bottom: 30px;
        }

        .setup-section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #fff;
        }

        .input-group {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-field {
            flex: 1;
            min-width: 150px;
        }

        .input-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #f0f0f0;
        }

        .input-field input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            text-align: center;
        }

        .input-field input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Layout para pantallas de laptop/desktop */
        .timer-layout {
            display: grid;
            align-items: start;
            grid-auto-columns: 1fr;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 40px;
            grid-template-areas:
                "a b"
                "a c";
        }

        .timer-main {
            display: flex;
            flex-direction: column;
            align-items: center;
            grid-area: a;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 300;
            margin: 40px 0;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .timer-type {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #ffd700;
            font-weight: 500;
        }

        .end-time {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #e0e0e0;
            font-weight: 400;
        }

        .time-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .time-selector {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .time-selector-label {
            font-size: 0.9rem;
            color: #e0e0e0;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .time-picker {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.15);
            padding: 10px 15px;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .time-adjust-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .time-adjust-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .time-adjust-btn:active {
            transform: scale(0.95);
        }

        .time-display-current {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffd700;
            min-width: 60px;
            text-align: center;
        }

        .quick-time-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .quick-time-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .quick-time-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .time-controls-title {
            width: 100%;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: #ffd700;
            font-weight: 500;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
        }

        .btn-success {
            background: linear-gradient(45deg, #00b894, #00a085);
        }

        /* Contenedor del video de YouTube */
        .youtube-video {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            grid-area: c;
        }

        .youtube-video iframe {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            border: none;
        }

        .stats-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
            grid-area: b;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: #ffd700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #f0f0f0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894, #00a085);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .hidden {
            display: none;
        }

        .motivational-quote {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .motivational-quote.show {
            opacity: 1;
            transform: translateY(0);
        }

        .quote-icon {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }

        .quote-text {
            font-size: 1.2em;
            font-style: italic;
            line-height: 1.4;
        }

        /* Media queries para diferentes tama√±os de pantalla */

        /* Pantallas grandes (desktop) */
        @media (min-width: 1200px) {
            .container {
                padding: 60px;
            }

            .timer-display {
                font-size: 5rem;
            }

            .youtube-video iframe {
                height: 250px;
            }
        }

        /* Pantallas medianas (laptops) - Layout de dos columnas */
        @media (min-width: 768px) and (max-width: 1199px) {
            .container {
                max-width: 1000px;
                padding: 30px;
            }

            .timer-layout {
                grid-template-columns: 1.2fr 0.8fr;
                gap: 30px;
            }

            .timer-display {
                font-size: 3.5rem;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .stat-card {
                padding: 15px;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .youtube-video iframe {
                height: 180px;
            }
        }

        /* Tablets - Layout h√≠brido */
        @media (min-width: 640px) and (max-width: 767px) {
            .timer-layout {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .container {
                padding: 25px;
            }

            .timer-display {
                font-size: 3rem;
            }

            .youtube-video {
                grid-column: 1 / -1;
                /* El video ocupa todo el ancho */
            }

            .youtube-video iframe {
                height: 220px;
            }
        }

        /* M√≥viles - Layout vertical */
        @media (max-width: 639px) {
            .container {
                padding: 20px;
            }

            .timer-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .timer-display {
                font-size: 2.5rem;
            }

            .input-group {
                flex-direction: column;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            button {
                width: 100%;
                max-width: 200px;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .time-controls {
                padding: 15px;
            }

            .quick-time-buttons {
                gap: 5px;
            }

            .quick-time-btn {
                padding: 4px 8px;
                font-size: 11px;
            }

            .youtube-video iframe {
                height: 200px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üçÖ Temporizador Pomodoro Mertens üíú</h1>

        <div id="setup" class="setup-section">
            <h2>Configuraci√≥n de Intervalos</h2>
            <div class="input-group">
                <div class="input-field">
                    <label for="workTime">Tiempo de Trabajo (min)</label>
                    <input type="number" id="workTime" value="25" min="1" max="120" />
                </div>
                <div class="input-field">
                    <label for="shortBreak">Descanso Corto (min)</label>
                    <input type="number" id="shortBreak" value="5" min="1" max="60" />
                </div>
                <div class="input-field">
                    <label for="longBreak">Descanso Largo (min)</label>
                    <input type="number" id="longBreak" value="15" min="1" max="120" />
                </div>
            </div>
            <button onclick="startSession()" class="btn-success">
                Iniciar Sesi√≥n
            </button>
        </div>

        <div id="timer" class="hidden">
            <div class="timer-layout">
                <div class="timer-main">
                    <div class="timer-type" id="timerType">Tiempo de Trabajo</div>
                    <div id="motivationalQuote" class="motivational-quote">
                        <span class="quote-icon"></span>
                        <p id="quoteText" class="quote-text">Aqu√≠ aparecer√° la cita motivacional</p>
                    </div>
                    <div class="end-time" id="endTime">Finalizar√° a las 00:00</div>
                    <div class="timer-display" id="display">25:00</div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>

                    <div class="time-controls" id="timeControls">
                        <div class="time-controls-title">‚è±Ô∏è Ajustar tiempo actual</div>
                        <div class="time-selector">
                            <div class="time-selector-label">Minutos</div>
                            <div class="time-picker">
                                <button class="time-adjust-btn" onclick="adjustTime(-5)">
                                    -
                                </button>
                                <div class="time-display-current" id="currentMinutes">25</div>
                                <button class="time-adjust-btn" onclick="adjustTime(5)">+</button>
                            </div>
                            <div class="quick-time-buttons">
                                <button class="quick-time-btn" onclick="setCurrentTime(5)">
                                    5m
                                </button>
                                <button class="quick-time-btn" onclick="setCurrentTime(15)">
                                    15m
                                </button>
                                <button class="quick-time-btn" onclick="setCurrentTime(25)">
                                    25m
                                </button>
                                <button class="quick-time-btn" onclick="setCurrentTime(30)">
                                    30m
                                </button>
                                <button class="quick-time-btn" onclick="setCurrentTime(45)">
                                    45m
                                </button>
                                <button class="quick-time-btn" onclick="setCurrentTime(60)">
                                    60m
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="controls">
                        <button id="playPauseBtn" onclick="toggleTimer()">‚ñ∂Ô∏è Iniciar</button>
                        <button onclick="skipTimer()" class="btn-secondary">‚è≠Ô∏è Saltar</button>
                        <button onclick="resetSession()" class="btn-secondary">
                            üîÑ Reiniciar
                        </button>
                    </div>
                </div>

                <div class="stats-sidebar">
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-value" id="pomodorosCount">0</div>
                            <div class="stat-label">Pomodoros</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="workTimeTotal">0h 0m 0s</div>
                            <div class="stat-label">Tiempo Trabajo</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="breakTimeTotal">0h 0m 0s</div>
                            <div class="stat-label">Tiempo Descanso</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalTime">0h 0m 0s</div>
                            <div class="stat-label">Tiempo Total</div>
                        </div>
                    </div>
                </div>

                <div class="youtube-video">
                    <iframe src="https://www.youtube.com/embed/VPFxZw5qUwE?si=ZKPZxRiLYe2v0nmM"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
        class PomodoroTimer {
            constructor() {
                this.workTime = 25;
                this.shortBreak = 5;
                this.longBreak = 15;
                this.currentTime = 0;
                this.totalTime = 0;
                this.isRunning = false;
                this.isWorkTime = true;
                this.pomodoroCount = 0;
                this.workTimeAccumulated = 0; // en segundos
                this.breakTimeAccumulated = 0; // en segundos
                this.interval = null;
                this.startTime = null;
                this.pausedTime = 0;
                this.sessionStartTime = null;
                this.usedQuotes = new Set(); // Para evitar repetir frases muy seguidas
            }

            setTimes(work, shortBreak, longBreak) {
                this.workTime = work;
                this.shortBreak = shortBreak;
                this.longBreak = longBreak;
                this.resetCurrentTimer();
            }

            resetCurrentTimer() {
                if (this.isWorkTime) {
                    this.currentTime = this.workTime * 60;
                    this.totalTime = this.workTime * 60;
                } else {
                    const breakTime =
                        this.pomodoroCount % 4 === 0 && this.pomodoroCount > 0
                            ? this.longBreak
                            : this.shortBreak;
                    this.currentTime = breakTime * 60;
                    this.totalTime = breakTime * 60;
                }
                this.updateDisplay();
                this.updateProgress();
                this.updateEndTime();
                this.updateCurrentTimeDisplay();
                this.updateCurrentTimeDisplay();
            }

            getRandomMotivationalQuote() {
                // Si hemos usado todas las frases, reinicia el conjunto
                if (this.usedQuotes.size >= motivationalQuotes.length) {
                    this.usedQuotes.clear();
                }

                let availableQuotes = motivationalQuotes.filter((_, index) => !this.usedQuotes.has(index));

                if (availableQuotes.length === 0) {
                    availableQuotes = motivationalQuotes;
                    this.usedQuotes.clear();
                }

                const randomQuote = availableQuotes[Math.floor(Math.random() * availableQuotes.length)];
                const quoteIndex = motivationalQuotes.indexOf(randomQuote);
                this.usedQuotes.add(quoteIndex);

                return randomQuote;
            }

            showMotivationalQuote() {
                const quoteElement = document.getElementById('motivationalQuote');
                const quoteTextElement = document.getElementById('quoteText');
                const quoteIconElement = quoteElement.querySelector('.quote-icon');

                if (this.isWorkTime) {
                    const quote = this.getRandomMotivationalQuote();
                    quoteTextElement.textContent = quote.text;
                    quoteIconElement.textContent = quote.icon;

                    // Mostrar con animaci√≥n
                    quoteElement.classList.remove('show');
                    setTimeout(() => {
                        quoteElement.classList.add('show');
                    }, 100);
                } else {
                    // Para descansos, mostrar mensaje de relajaci√≥n
                    const relaxQuotes = [
                        { text: "Tiempo de recargar energ√≠as. Te lo has ganado", icon: "‚òï" },
                        { text: "Un descanso merecido para una mente brillante", icon: "üå∏" },
                        { text: "Respira, rel√°jate y prep√°rate para el siguiente round", icon: "üßò" },
                        { text: "Los descansos son parte del √©xito. Disfr√∫talo", icon: "üå∫" },
                        { text: "Tu mente necesita este momento de paz", icon: "üïäÔ∏è" },
                        { text: "Pausa activa: tu cerebro se est√° reorganizando", icon: "üß†" },
                        { text: "Momento de inspiraci√≥n. Deja que fluyan las ideas", icon: "üí°" },
                        { text: "Estira, respira y vuelve m√°s fuerte", icon: "üåø" },
                        { text: "Los grandes logros necesitan peque√±as pausas", icon: "‚≠ê" },
                        { text: "Tu productividad se alimenta de estos momentos", icon: "üîã" },
                        { text: "Desconecta para reconectar mejor", icon: "üîå" },
                        { text: "El descanso es la gasolina de la creatividad", icon: "üé®" },
                        { text: "Cada pausa te acerca m√°s a tu objetivo", icon: "üéØ" },
                        { text: "Tu futuro yo te agradecer√° este descanso", icon: "üôè" },
                        { text: "Momento zen: tu mente lo est√° pidiendo", icon: "üßò‚Äç‚ôÄÔ∏è" },
                        { text: "Los campeones tambi√©n descansan", icon: "üèÜ" },
                        { text: "Recarga completa en proceso...", icon: "‚ö°" },
                        { text: "Tu bienestar es tu mayor inversi√≥n", icon: "üíé" },
                        { text: "Pausa estrat√©gica para mentes inteligentes", icon: "üé≠" },
                        { text: "El silencio tambi√©n es productivo", icon: "ü§´" },
                        { text: "Tu cuerpo y mente te lo agradecen", icon: "üíö" },
                        { text: "Tiempo de calidad contigo mismo", icon: "üåÖ" },
                        { text: "La pausa perfecta para una mente perfecta", icon: "‚ú®" },
                        { text: "Descansar es un acto de amor propio", icon: "üíù" },
                        { text: "Tu siguiente logro empieza con este descanso", icon: "üöÄ" }
                    ];

                    const randomRelaxQuote = relaxQuotes[Math.floor(Math.random() * relaxQuotes.length)];
                    quoteTextElement.textContent = randomRelaxQuote.text;
                    quoteIconElement.textContent = randomRelaxQuote.icon;

                    quoteElement.classList.remove('show');
                    setTimeout(() => {
                        quoteElement.classList.add('show');
                    }, 100);
                }
            }

            adjustTime(minutes) {
                if (this.isRunning) return; // No permitir ajustes durante la ejecuci√≥n

                const currentMinutes = Math.floor(this.currentTime / 60);
                const newMinutes = Math.max(1, currentMinutes + minutes); // M√≠nimo 1 minuto

                this.currentTime = newMinutes * 60;
                this.totalTime = newMinutes * 60;
                this.updateDisplay();
                this.updateProgress();
                this.updateEndTime();
                this.updateCurrentTimeDisplay();
            }

            setCurrentTime(minutes) {
                if (this.isRunning) return; // No permitir ajustes durante la ejecuci√≥n

                this.currentTime = minutes * 60;
                this.totalTime = minutes * 60;
                this.updateDisplay();
                this.updateProgress();
                this.updateEndTime();
                this.updateCurrentTimeDisplay();
            }

            updateCurrentTimeDisplay() {
                const minutes = Math.floor(this.currentTime / 60);
                document.getElementById("currentMinutes").textContent = minutes;
            }

            start() {
                if (!this.isRunning) {
                    this.isRunning = true;
                    this.showMotivationalQuote();
                    if (!this.sessionStartTime) {
                        this.sessionStartTime = Date.now();
                    }
                    this.startTime = Date.now() - this.pausedTime;
                    this.interval = setInterval(() => {
                        this.currentTime--;
                        this.updateDisplay();
                        this.updateProgress();
                        this.updateEndTime();
                        this.updateCurrentTimeDisplay();

                        if (this.currentTime <= 0) {
                            this.completeTimer();
                        }
                    }, 1000);

                    document.getElementById("playPauseBtn").innerHTML = "‚è∏Ô∏è Pausar";
                    document.getElementById("timeControls").classList.add("disabled");
                    document.getElementById("timeControls").classList.remove("enabled");
                    this.updateEndTime();
                }
            }

            pause() {
                if (this.isRunning) {
                    this.isRunning = false;
                    this.pausedTime = Date.now() - this.startTime;
                    clearInterval(this.interval);
                    document.getElementById("playPauseBtn").innerHTML = "‚ñ∂Ô∏è Continuar";
                    document
                        .getElementById("timeControls")
                        .classList.remove("disabled");
                    document.getElementById("timeControls").classList.add("enabled");
                }
            }

            completeTimer() {
                this.isRunning = false;
                clearInterval(this.interval);
                this.pausedTime = 0;

                // Actualizar estad√≠sticas en segundos
                if (this.isWorkTime) {
                    this.pomodoroCount++;
                    this.workTimeAccumulated += this.totalTime;
                } else {
                    this.breakTimeAccumulated += this.totalTime;
                }

                // Alternar entre trabajo y descanso
                this.isWorkTime = !this.isWorkTime;
                this.resetCurrentTimer();
                this.updateStats();
                this.updateTimerType();

                // Notificaci√≥n
                this.showNotification();
                playNotificationSound();

                document.getElementById("playPauseBtn").innerHTML = "‚ñ∂Ô∏è Iniciar";
                document.getElementById("timeControls").classList.remove("disabled");
                document.getElementById("timeControls").classList.add("enabled");
                document.getElementById("timeControls").classList.remove("disabled");
                document.getElementById("timeControls").classList.add("enabled");
            }

            skip() {
                const timeSpent = this.totalTime - this.currentTime;

                if (this.isWorkTime) {
                    this.pomodoroCount++;
                    this.workTimeAccumulated += timeSpent;
                } else {
                    this.breakTimeAccumulated += timeSpent;
                }

                this.isRunning = false;
                clearInterval(this.interval);
                this.pausedTime = 0;
                this.isWorkTime = !this.isWorkTime;
                this.resetCurrentTimer();
                this.updateStats();
                this.updateTimerType();

                document.getElementById("playPauseBtn").innerHTML = "‚ñ∂Ô∏è Iniciar";
            }

            updateDisplay() {
                const minutes = Math.floor(this.currentTime / 60);
                const seconds = this.currentTime % 60;
                document.getElementById("display").textContent = `${minutes
                    .toString()
                    .padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
            }

            updateProgress() {
                const progress =
                    ((this.totalTime - this.currentTime) / this.totalTime) * 100;
                document.getElementById("progressFill").style.width = progress + "%";
            }

            updateEndTime() {
                const now = new Date();
                const endTime = new Date(now.getTime() + this.currentTime * 1000);
                const hours = endTime.getHours().toString().padStart(2, "0");
                const minutes = endTime.getMinutes().toString().padStart(2, "0");
                document.getElementById(
                    "endTime"
                ).textContent = `Finalizar√° a las ${hours}:${minutes}`;
            }

            updateTimerType() {
                const typeElement = document.getElementById("timerType");
                if (this.isWorkTime) {
                    typeElement.textContent = "üçÖ Tiempo de Trabajo";
                    typeElement.style.color = "#ff6b6b";
                } else {
                    const isLongBreak =
                        this.pomodoroCount % 4 === 0 && this.pomodoroCount > 0;
                    typeElement.textContent = isLongBreak
                        ? "üåü Descanso Largo"
                        : "‚òï Descanso Corto";
                    typeElement.style.color = "#00b894";
                }
            }

            formatTime(totalSeconds) {
                const hours = Math.floor(totalSeconds / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = totalSeconds % 60;

                if (hours > 0) {
                    return `${hours}h ${minutes}m ${seconds}s`;
                } else if (minutes > 0) {
                    return `${minutes}m ${seconds}s`;
                } else {
                    return `${seconds}s`;
                }
            }

            updateStats() {
                document.getElementById("pomodorosCount").textContent =
                    this.pomodoroCount;
                document.getElementById("workTimeTotal").textContent =
                    this.formatTime(this.workTimeAccumulated);
                document.getElementById("breakTimeTotal").textContent =
                    this.formatTime(this.breakTimeAccumulated);
                document.getElementById("totalTime").textContent = this.formatTime(
                    this.workTimeAccumulated + this.breakTimeAccumulated
                );
            }

            showNotification() {
                const message = this.isWorkTime
                    ? "¬°Hora de trabajar! üçÖ"
                    : "¬°Hora de descansar! ‚òï";

                if (
                    "Notification" in window &&
                    Notification.permission === "granted"
                ) {
                    new Notification("Pomodoro Timer", { body: message });
                } else if (
                    "Notification" in window &&
                    Notification.permission !== "denied"
                ) {
                    Notification.requestPermission().then((permission) => {
                        if (permission === "granted") {
                            new Notification("Pomodoro Timer", { body: message });
                        }
                    });
                }

                // Efecto visual
                document.body.style.animation = "pulse 0.5s ease-in-out 3";
            }

            reset() {
                this.isRunning = false;
                clearInterval(this.interval);
                this.pausedTime = 0;
                this.pomodoroCount = 0;
                this.workTimeAccumulated = 0;
                this.breakTimeAccumulated = 0;
                this.sessionStartTime = null;
                this.isWorkTime = true;
                this.resetCurrentTimer();
                this.updateStats();
                this.updateTimerType();
                document.getElementById("playPauseBtn").innerHTML = "‚ñ∂Ô∏è Iniciar";
            }
        }

        // Instancia global del timer
        const timer = new PomodoroTimer();

        function startSession() {
            const workTime = parseInt(document.getElementById("workTime").value);
            const shortBreak = parseInt(
                document.getElementById("shortBreak").value
            );
            const longBreak = parseInt(document.getElementById("longBreak").value);

            if (workTime < 1 || shortBreak < 1 || longBreak < 1) {
                alert("Por favor, ingresa valores v√°lidos (m√≠nimo 1 minuto)");
                return;
            }

            timer.setTimes(workTime, shortBreak, longBreak);
            timer.updateTimerType();

            document.getElementById("setup").classList.add("hidden");
            document.getElementById("timer").classList.remove("hidden");
            document.getElementById("timeControls").classList.add("enabled");

            // Solicitar permisos de notificaci√≥n
            if ("Notification" in window && Notification.permission === "default") {
                Notification.requestPermission();
            }
        }

        function toggleTimer() {
            if (timer.isRunning) {
                timer.pause();
            } else {
                timer.start();
            }
        }

        function skipTimer() {
            timer.skip();
        }

        function adjustTime(minutes) {
            timer.adjustTime(minutes);
        }

        function setCurrentTime(minutes) {
            timer.setCurrentTime(minutes);
        }

        function resetSession() {
            if (
                confirm(
                    "¬øEst√°s seguro de que quieres reiniciar la sesi√≥n? Se perder√°n todas las estad√≠sticas."
                )
            ) {
                timer.reset();
                document.getElementById("setup").classList.remove("hidden");
                document.getElementById("timer").classList.add("hidden");
            }
        }

        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                // Configurar el sonido
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.type = 'sine';

                // Configurar volumen y fade out
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);

                // Reproducir
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);

            } catch (error) {
                console.log('Error con Web Audio API:', error);
            }
        }

        // A√±adir animaci√≥n de pulso
        const style = document.createElement("style");
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.02); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);

        // Prevenir que se cierre accidentalmente
        window.addEventListener("beforeunload", function (e) {
            if (timer.isRunning) {
                e.preventDefault();
                e.returnValue =
                    "¬øEst√°s seguro de que quieres salir? El temporizador se detendr√°.";
            }
        });

        const motivationalQuotes = [
            {
                text: "El √©xito es la suma de peque√±os esfuerzos repetidos d√≠a tras d√≠a",
                icon: "üéØ",
            },
            {
                text: "Cada minuto cuenta, cada segundo importa. ¬°Hazlo brillar!",
                icon: "‚ú®",
            },
            {
                text: "Tu futuro se crea con lo que haces hoy, no ma√±ana",
                icon: "üöÄ",
            },
            {
                text: "La disciplina es hacer lo que odias como si fuera lo que amas",
                icon: "üí™",
            },
            {
                text: "No se trata de tener tiempo, se trata de crear tiempo",
                icon: "‚è∞",
            },
            {
                text: "Cada pomodoro te acerca un paso m√°s a tu objetivo",
                icon: "üéØ",
            },
            {
                text: "La procrastinaci√≥n es el ladr√≥n del tiempo. ¬°Recupera el control!",
                icon: "üî•",
            },
            { text: "Enf√≥cate en el progreso, no en la perfecci√≥n", icon: "üìà" },
            { text: "Los sue√±os no funcionan a menos que t√∫ lo hagas", icon: "üí´" },
            {
                text: "25 minutos de enfoque total pueden cambiar tu d√≠a",
                icon: "üé™",
            },
            {
                text: "El momento perfecto nunca llega. El momento es ahora",
                icon: "‚ö°",
            },
            { text: "Tu √∫nica competencia eres t√∫ mismo de ayer", icon: "üèÜ" },
            {
                text: "La consistencia es m√°s poderosa que la perfecci√≥n",
                icon: "üîÑ",
            },
            { text: "Cada tarea completada es una victoria personal", icon: "üèÖ" },
            {
                text: "El trabajo duro en silencio deja que el √©xito haga ruido",
                icon: "ü§´",
            },
            { text: "Concentraci√≥n es el secreto de la fuerza", icon: "üé≠" },
            {
                text: "No esperes la inspiraci√≥n. Ve a buscarla con el trabajo",
                icon: "üîç",
            },
            {
                text: "Los peque√±os pasos diarios crean grandes cambios",
                icon: "üë£",
            },
            { text: "Tu enfoque determina tu realidad", icon: "üîÆ" },
            {
                text: "El √©xito comienza con una decisi√≥n: empezar ahora",
                icon: "‚≠ê",
            },
            {
                text: "Cada pomodoro es una oportunidad de demostrar tu potencial",
                icon: "üíé",
            },
            { text: "La excelencia es un h√°bito, no un acto", icon: "üé®" },
            { text: "Tu energ√≠a fluye donde pones tu atenci√≥n", icon: "‚ö°" },
            { text: "25 minutos de poder total. ¬°T√∫ puedes con todo!", icon: "ü¶Å" },
            {
                text: "El futuro pertenece a quienes se concentran en el presente",
                icon: "üåü",
            },
        ];
    </script>
</body>

</html>